<!DOCTYPE html>
<html>
<head>
<title>Login System with CAD & Support</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background: #111;
        color: white;
        text-align: center;
        margin: 0;
    }
    .hidden { display: none; }
    button {
        background: #444;
        color: white;
        border: none;
        padding: 12px 20px;
        margin: 10px;
        cursor: pointer;
        border-radius: 8px;
    }
    button:hover { background: #666; }
    .center {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100vh;
    }
    .suspended-label {
        color: red;
        font-weight: bold;
    }
</style>
</head>
<body>

<!-- Login Screen -->
<div id="loginScreen" class="center">
    <h2>Login</h2>
    <input type="text" id="username" placeholder="Username"><br>
    <input type="password" id="password" placeholder="Password"><br>
    <button onclick="login()">Login</button>
</div>

<!-- Menu Screen -->
<div id="menuScreen" class="center hidden">
    <h2>Welcome</h2>
    <div id="menuButtons"></div>
</div>

<!-- CAD Area -->
<div id="cadScreen" class="hidden">
    <h2>CAD Area</h2>
    <p>Here you can join or create CADs.</p>
    <button onclick="goMenu()">Back to Menu</button>
</div>

<!-- Support Area -->
<div id="supportScreen" class="hidden">
    <h2>Support Area</h2>
    <button onclick="showSuspendScreen()">Suspend Servers</button><br><br>
    <button onclick="goMenu()">Back to Menu</button>
</div>

<!-- Suspend Servers Screen -->
<div id="suspendScreen" class="hidden">
    <h2>Suspend Servers</h2>
    <div id="serverList"></div>
    <button onclick="goSupport()">Back to Support</button>
</div>

<script>
let currentUser = null;
const supportAccounts = [
    { username: "RYAN", password: "RYAN" },
    { username: "Tbrfrag89", password: "COCRPff" }
];

function login() {
    const user = document.getElementById("username").value;
    const pass = document.getElementById("password").value;
    currentUser = user;

    const isSupport = supportAccounts.some(acc => acc.username === user && acc.password === pass);

    // Successful login
    if (isSupport) {
        showMenu(true);
    } else if (localStorage.getItem("user_" + user) || pass === "test") {
        showMenu(false); // CAD only
    } else {
        alert("Invalid login");
    }
}

function showMenu(hasSupport) {
    document.getElementById("loginScreen").classList.add("hidden");
    document.getElementById("menuScreen").classList.remove("hidden");

    const menuButtons = document.getElementById("menuButtons");
    menuButtons.innerHTML = '';

    // CAD Area button
    let cadBtn = document.createElement("button");
    cadBtn.innerText = "Go to CAD Area";
    cadBtn.onclick = () => {
        document.getElementById("menuScreen").classList.add("hidden");
        document.getElementById("cadScreen").classList.remove("hidden");
    };
    menuButtons.appendChild(cadBtn);

    // Support Area button (only for special accounts)
    if (hasSupport) {
        let supportBtn = document.createElement("button");
        supportBtn.innerText = "Go to Support Area";
        supportBtn.onclick = () => {
            document.getElementById("menuScreen").classList.add("hidden");
            document.getElementById("supportScreen").classList.remove("hidden");
        };
        menuButtons.appendChild(supportBtn);
    }
}

function goMenu() {
    document.querySelectorAll("div").forEach(div => div.classList.add("hidden"));
    document.getElementById("menuScreen").classList.remove("hidden");
}

function goSupport() {
    document.querySelectorAll("div").forEach(div => div.classList.add("hidden"));
    document.getElementById("supportScreen").classList.remove("hidden");
}

function showSuspendScreen() {
    document.querySelectorAll("div").forEach(div => div.classList.add("hidden"));
    document.getElementById("suspendScreen").classList.remove("hidden");
    showServers();
}

function showServers() {
    const serverList = document.getElementById('serverList');
    serverList.innerHTML = '';

    Object.keys(localStorage).forEach(key => {
        if (key.startsWith('user_')) {
            const username = key.replace('user_', '');
            const data = JSON.parse(localStorage.getItem(key));

            if (data && data.cads) {
                data.cads.forEach((cad, index) => {
                    const div = document.createElement('div');
                    div.innerHTML = `
                        <strong>${cad.name}</strong> 
                        ${cad.suspended ? '<span class="suspended-label">[SUSPENDED]</span>' : ''}
                        <br><small>Owner: ${cad.owner}</small>
                        <br><a href="${cad.website}" target="_blank">Visit Website</a>
                        <br>
                        <button onclick="toggleSuspend('${key}', ${index})">
                            ${cad.suspended ? 'Unsuspend' : 'Suspend'}
                        </button>
                        <hr>
                    `;
                    serverList.appendChild(div);
                });
            }
        }
    });
}

function toggleSuspend(userKey, cadIndex) {
    const data = JSON.parse(localStorage.getItem(userKey));
    if (data && data.cads && data.cads[cadIndex]) {
        data.cads[cadIndex].suspended = !data.cads[cadIndex].suspended;
        localStorage.setItem(userKey, JSON.stringify(data));
        showServers();
    }
}
</script>
</body>
</html>
